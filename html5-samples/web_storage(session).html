<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>WebStorage(Session) Test</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<script type="text/javascript" src="jquery-2.0.3.min.js"></script>
</head>
<body>

<script>
if (typeof sessionStorage == 'undefined') {
	document.write("<p>お使いのブラウザではWebStorageが使えません。</p>");
}else{

$(function() {
	var storage = sessionStorage;
	
	function saveStorage() {
		storage.setItem("firstname", "taro");
		storage.setItem("lastname", "yamada");
		window.alert("WebStorageに保存しました。");
	};
	
	function showStorage() {
		if(storage.length == 0)
			window.alert("WebStorageにデータがありません。");
			
		for (var i=0; i < storage.length; i++) {
			var _key = storage.key(i);
			var _val = storage.getItem(_key);
			window.alert("key:" + _key + " val:" + _val);
		}
	};
	
	function delStorage() {
		var _key = "firstname";
		storage.removeItem(_key);
		window.alert(_key + "を削除しました。");
	};
	
	function clearStorage() {
		storage.clear();
		window.alert("全削除しました。");
	};
	
	$( "#save" ).click(function() {
		saveStorage();
		return false;
	});
	
	$( "#show" ).click(function() {
		showStorage();
		return false;
	});
	
	$( "#del" ).click(function() {
		delStorage();
		return false;
	});
	
	$( "#clear" ).click(function() {
		clearStorage();
		return false;
	});
});

}
</script>
<input type="button" id="save" value="保存"> <input type="button" id="show" value="確認"> <input type="button" id="del" value="1つ削除"> <input type="button" id="clear" value="全削除">
</body>
</html>
